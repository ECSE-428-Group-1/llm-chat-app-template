<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>NASAQ ChatBox</title>
	<link rel="stylesheet" href="style.css">
</head>

<body>
	<nav class="top-nav">
		<div class="brand-container">
			<img src="logo.png" alt="NASAQ Logo" width="80">
			<div class="logo">NASAQ ChatBot</div>
		</div>

		<div class="nav-links">
			<a href="contact.html">Contact</a>
			<a href="links.html">Links</a>
		</div>
	</nav>

	<div class="main-wrapper">
		<aside class="sidebar">
			<button class="new-chat-btn">+ New Chat</button>
			<h2>CHAT HISTORY</h2>
			<ul class="history-list">
				<li><a href="#">Topic 1: PTO</a></li>
				<li><a href="#">Topic 2: Overtime</a></li>
				<li><a href="#">Topic 3: Lunch break</a></li>
			</ul>
		</aside>

		<main class="chat-area">
			<div id="chat-messages" class="chat-messages">
				<div class="message assistant-message">
					<p>
						Hello! I'm an AI assistant to answer your labor relations questions. How can I help you today?
					</p>
				</div>
			</div>

			<div class="typing-indicator" id="typing-indicator">
				AI is thinking...
			</div>

			<div id="toast-container" class="toast-container"></div>

		</main>
	</div>
	<div class="message-input">
		<div class="input-pill">
			<textarea id="user-input" placeholder="Please Enter Your Prompt Here" rows="1" autofocus></textarea>
			<button id="send-button">
				<span class="arrow-up">↑</span>
			</button>
		</div>
		<p class="disclaimer">
			Please do not enter any personal information. Information you provide may be used for training
			and improving LLM provider's model.
		</p>
	</div>
	<div id="disclaimer-modal" class="modal-overlay">
		<div class="modal-content">
			<h2>User Agreement & Disclaimer</h2>
			<div id="modal-text">
				<p>AI can make mistakes and its responses should be verified. By using this app, you consent to our
					privacy policy and AI provider's data collection. Agreeing will create a cookie for 30 days.</p>
			</div>

			<div id="pdf-viewer-container" style="display: none; flex-grow: 1; margin-bottom: 15px; min-height: 200px;">
				<iframe src="privacy-policy.pdf" width="100%" height="100%" style="border: none;"></iframe>
			</div>

			<div class="modal-actions">
				<button id="read-policy-btn" class="modal-btn secondary">Read Policy</button>
				<button id="decline-btn" class="modal-btn danger">Decline</button>
				<button id="agree-btn" class="modal-btn primary">Agree</button>
			</div>
			<p id="error-message" class="error-text" style="display: none;">
				You must accept the disclaimer to use the chatbot.
			</p>
		</div>
	</div>

	<div id="max-retries-modal" class="modal-overlay" style="display: none;">
		<div class="modal-content">
			<div>
				<div class="modal-warning-icon">⚠️</div>
				<h2 style="color: #ff6b6b; margin-bottom: 20px;">Limit Reached</h2>
				<div id="max-retries-text" style="font-size: 1.1rem; line-height: 1.6; color: var(--text-dark);">
					<p>You have reached the maximum number of retries for this question.</p>
					<p style="margin-top: 15px; font-weight: bold;">Please try again later.</p>
				</div>
			</div>

			<div class="modal-actions">
				<button id="close-retries-btn" class="modal-btn primary">OK</button>
			</div>
		</div>
	</div>
	<div id="rate-limit-modal" class="modal-overlay" style="display: none;">
		<div class="modal-content">
			<div>
				<div class="modal-warning-icon">⏳</div>
				<h2 style="color: #ff9f43; margin-bottom: 20px;">Rate Limit Exceeded</h2>
				<div id="rate-limit-text" style="font-size: 1.1rem; line-height: 1.6; color: var(--text-dark);">
					<p>You are sending messages too fast. Please wait a moment before trying again.</p>
				</div>
			</div>
			<div class="modal-actions">
				<button onclick="document.getElementById('rate-limit-modal').style.display='none'" class="modal-btn primary">OK</button>
			</div>
		</div>
	</div>
	
	<script src="chat.js"></script>

</body>

</html>
